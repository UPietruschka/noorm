## Velocity template to generate the code for all declared queries
#if($class.isInterface())
package $class.InterfacePackageName;
#else
package $class.PackageName;
#end

import ${class.BeanPackageName}.*;
import org.noorm.jdbc.*;
import java.util.*;
#if(!$class.isInterface() && $class.hasInterface())
import ${class.InterfacePackageName}.${class.JavaInterfaceName};
#end

/**
 * Generated database access functionality for all declared queries
 * DO NOT EDIT! This file has been auto-generated by NoORM
 */
#if($class.isInterface())
public interface ${class.JavaInterfaceName} {
#else

#if($class.hasInterface())
public class ${class.JavaName} implements ${class.JavaInterfaceName} {
#else
public class ${class.JavaName} {
#end
#end
#if(!$class.hasInterface())

	private static ${class.JavaName} ourInstance = new ${class.JavaName}();
#end
#if(!$class.isInterface())

#if ($class.hasDataSourceName())
	private static final String DATA_SOURCE_NAME = "$class.getDataSourceName()";
#end
#end
#if(!$class.isInterface() && !$class.hasInterface())

	protected ${class.JavaName}() {
	}

	public static ${class.JavaName} getInstance() {

		return ourInstance;
	}
#end
#foreach ($query in $class.queries)

#if($class.isInterface())
	#if(!$query.isSingleRowQuery())List<#end$query.getBeanName()#if(!$query.isSingleRowQuery())>#end $query.getMethodName()(#foreach ($param in $query.Parameters)final $param.JavaType ${param.JavaName}#if($velocityCount<$query.Parameters.size()),${nl}${subindent}#end#end);
#else
	public #if(!$query.isSingleRowQuery())List<#end$query.getBeanName()#if(!$query.isSingleRowQuery())>#end $query.getMethodName()(#foreach ($param in $query.Parameters)final $param.JavaType ${param.JavaName}#if($velocityCount<$query.Parameters.size()),${nl}${subindent}#end#end) {

#if ($class.hasDataSourceName())
		DataSourceProvider.setActiveDataSource(DATA_SOURCE_NAME);
#end
		final Map<QueryColumn, Object> parameters = new HashMap<QueryColumn, Object>();
#foreach ($param in $query.Parameters)
#foreach ($column in $query.QueryColumns)
#if($param.getOracleName().toUpperCase().equals($column.getColumnName().toUpperCase()))
		parameters.put(new QueryColumn("$column.getColumnName()", new Operator("$column.getOperator().getOperatorName()")), $param.JavaName);
#end
#end
#end
		final JDBCStatementProcessor<$query.getBeanName()> stmtProcessor = JDBCStatementProcessor.getInstance();
		final List<$query.getBeanName()> results = stmtProcessor.getBeanListFromSQL("$query.getTableName().toUpperCase()", parameters, ${query.getBeanName()}.class);
#if($query.isSingleRowQuery())
		if (results.isEmpty()) {
			return null;
		} else {
			return results.get(0);
		}
#else
		return results;
#end
	}
#end
#end
}
